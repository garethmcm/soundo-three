import{r as l,j as e}from"./index-Unzykuk8.js";import{e as S,o as p,G as T,f as b,h as q,T as R,P as r,O as _,S as f,A as N,r as j,j as w,b as A,p as D,s as V}from"./stop-circle-DqqeZ05H.js";import{s as C,g as F,b as E,d as G,p as O,v as B}from"./VOCAL WITH VERB-DVYifobt.js";import{S as y,D as x}from"./StereoFeedbackEffect-BWPbkYbB.js";import{S as P}from"./Scale-CgNTF5O5.js";import"./StereoEffect-D9K0WMVi.js";import"./CrossFade-Bq0s1Naa.js";import"./Merge-DoBl48kR.js";class d extends S{constructor(){super(p(d.getDefaults(),arguments)),this.name="Zero",this._gain=new T({context:this.context}),this.output=this._gain,this.input=void 0,b(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),q(this.context.getConstant(0),this._gain),this}}class c extends R{constructor(){const t=p(c.getDefaults(),arguments,["frequency","min","max"]);super(t),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=r.prototype._fromType,this._toType=r.prototype._toType,this._is=r.prototype._is,this._clampValue=r.prototype._clampValue,this._oscillator=new _(t),this.frequency=this._oscillator.frequency,this._amplitudeGain=new T({context:this.context,gain:t.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new f({context:this.context,units:"audioRange",value:0}),this._zeros=new d({context:this.context}),this._a2g=new N({context:this.context}),this._scaler=this.output=new P({context:this.context,max:t.max,min:t.min}),this.units=t.units,this.min=t.min,this.max=t.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),j(this,["amplitude","frequency"]),this.phase=t.phase}static getDefaults(){return Object.assign(_.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(0,t),this._oscillator.start(t),this}stop(t){return t=this.toSeconds(t),this._stoppedSignal.setValueAtTime(this._stoppedValue,t),this._oscillator.stop(t),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(t){t=this._fromType(t),this._scaler.min=t}get max(){return this._toType(this._scaler.max)}set max(t){t=this._fromType(t),this._scaler.max=t}get type(){return this._oscillator.type}set type(t){this._oscillator.type=t,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(t){this._oscillator.partials=t,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(t){this._oscillator.phase=t,this._setStoppedValue()}get units(){return this._units}set units(t){const n=this.min,s=this.max;this._units=t,this.min=n,this.max=s}get state(){return this._oscillator.state}connect(t,n,s){return(t instanceof r||t instanceof f)&&(this.convert=t.convert,this.units=t.units),w(this,t,n,s),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}class m extends y{constructor(){const t=p(m.getDefaults(),arguments,["frequency","delayTime","depth"]);super(t),this.name="Chorus",this._depth=t.depth,this._delayTime=t.delayTime/1e3,this._lfoL=new c({context:this.context,frequency:t.frequency,min:0,max:1}),this._lfoR=new c({context:this.context,frequency:t.frequency,min:0,max:1,phase:180}),this._delayNodeL=new x({context:this.context}),this._delayNodeR=new x({context:this.context}),this.frequency=this._lfoL.frequency,j(this,["frequency"]),this._lfoL.frequency.connect(this._lfoR.frequency),this.connectEffectLeft(this._delayNodeL),this.connectEffectRight(this._delayNodeR),this._lfoL.connect(this._delayNodeL.delayTime),this._lfoR.connect(this._delayNodeR.delayTime),this.depth=this._depth,this.type=t.type,this.spread=t.spread}static getDefaults(){return Object.assign(y.getDefaults(),{frequency:1.5,delayTime:3.5,depth:.7,type:"sine",spread:180,feedback:0,wet:.5})}get depth(){return this._depth}set depth(t){this._depth=t;const n=this._delayTime*t;this._lfoL.min=Math.max(this._delayTime-n,0),this._lfoL.max=this._delayTime+n,this._lfoR.min=Math.max(this._delayTime-n,0),this._lfoR.max=this._delayTime+n}get delayTime(){return this._delayTime*1e3}set delayTime(t){this._delayTime=t/1e3,this.depth=this._depth}get type(){return this._lfoL.type}set type(t){this._lfoL.type=t,this._lfoR.type=t}get spread(){return this._lfoR.phase-this._lfoL.phase}set spread(t){this._lfoL.phase=90-t/2,this._lfoR.phase=t/2+90}start(t){return this._lfoL.start(t),this._lfoR.start(t),this}stop(t){return this._lfoL.stop(t),this._lfoR.stop(t),this}sync(){return this._lfoL.sync(),this._lfoR.sync(),this}unsync(){return this._lfoL.unsync(),this._lfoR.unsync(),this}dispose(){return super.dispose(),this._lfoL.dispose(),this._lfoR.dispose(),this._delayNodeL.dispose(),this._delayNodeR.dispose(),this.frequency.dispose(),this}}const g=[{noteAllocation:"C4",fileLocation:C,sampleTitle:"Sunshine"},{noteAllocation:"D4",fileLocation:F,sampleTitle:"Guitar"},{noteAllocation:"E4",fileLocation:E,sampleTitle:"Bass"},{noteAllocation:"F4",fileLocation:G,sampleTitle:"Drums"},{noteAllocation:"G4",fileLocation:O,sampleTitle:"Piano"},{noteAllocation:"A5",fileLocation:B,sampleTitle:"Vocals"}],Q=()=>{const[h,t]=l.useState(!1),n=l.useRef(null),s=l.useRef(null);l.useEffect(()=>(n.current=new A(Object.fromEntries(g.map(i=>[i.noteAllocation,i.fileLocation])),{onload:()=>{t(!0)}}).toDestination(),s.current=new m({frequency:4,delayTime:2.5,depth:.5}).toDestination(),n.current&&s.current&&n.current.connect(s.current),()=>{n.current&&n.current.dispose(),s.current&&s.current.dispose()}),[]);const L=i=>{h&&n.current&&n.current.triggerAttack(i)},v=i=>{n.current&&n.current.triggerRelease(i)},u=(i,a,o)=>{s.current&&(s.current.frequency.value=i,s.current.delayTime=a,s.current.depth=o)};return e.jsxs("div",{children:[e.jsx("h1",{children:"Chorus"}),e.jsxs("div",{className:"audioComponentDisplay",children:[e.jsx("div",{className:"playerButtonBox",children:e.jsx("div",{children:g.map(i=>e.jsxs("div",{className:"playerButtonBox",children:[e.jsx("h2",{className:"sampleTitle",children:i.sampleTitle}),e.jsx("div",{onClick:()=>h&&L(i.noteAllocation),children:e.jsx("img",{src:D,alt:"Play",className:"buttons"})}),e.jsx("div",{onClick:()=>h&&v(i.noteAllocation),children:e.jsx("img",{src:V,alt:"Stop",className:"buttons"})})]},i.noteAllocation))})}),e.jsxs("div",{className:"paramDials",children:[e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["LFO: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"0",max:"20",step:"0.1",defaultValue:"4",onChange:i=>{var a,o;return u(parseFloat(i.target.value),((a=s.current)==null?void 0:a.delayTime)||2.5,((o=s.current)==null?void 0:o.depth)||2.5)}})]}),e.jsx("div",{className:"explainer",children:"Frequency selector"})]}),e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["Delay time: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"0",max:"10",step:"0.001",defaultValue:"2.5",onChange:i=>{var a,o;return u(((a=s.current)==null?void 0:a.frequency.value)||1e3,parseFloat(i.target.value),((o=s.current)==null?void 0:o.depth)||2.5)}})]}),e.jsx("div",{className:"explainer",children:"Time between original sound and effect"})]}),e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["Depth: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.5",onChange:i=>{var a,o;return u(((a=s.current)==null?void 0:a.frequency.value)||1e3,((o=s.current)==null?void 0:o.delayTime)||2.5,parseFloat(i.target.value))}})]}),e.jsx("div",{className:"explainer",children:"How wobbly the effect was"})]})]})]})]})};export{Q as default};
