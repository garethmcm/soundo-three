import{r as u,j as e}from"./index-Unzykuk8.js";import{T as p,o as f,P as n,r as j,b as g,p as k,s as b}from"./stop-circle-DqqeZ05H.js";import{s as V,g as _,b as y,d as N,p as A,v as T}from"./VOCAL WITH VERB-DVYifobt.js";class m extends p{constructor(){const l=f(m.getDefaults(),arguments,["threshold","ratio"]);super(l),this.name="Compressor",this._compressor=this.context.createDynamicsCompressor(),this.input=this._compressor,this.output=this._compressor,this.threshold=new n({minValue:this._compressor.threshold.minValue,maxValue:this._compressor.threshold.maxValue,context:this.context,convert:!1,param:this._compressor.threshold,units:"decibels",value:l.threshold}),this.attack=new n({minValue:this._compressor.attack.minValue,maxValue:this._compressor.attack.maxValue,context:this.context,param:this._compressor.attack,units:"time",value:l.attack}),this.release=new n({minValue:this._compressor.release.minValue,maxValue:this._compressor.release.maxValue,context:this.context,param:this._compressor.release,units:"time",value:l.release}),this.knee=new n({minValue:this._compressor.knee.minValue,maxValue:this._compressor.knee.maxValue,context:this.context,convert:!1,param:this._compressor.knee,units:"decibels",value:l.knee}),this.ratio=new n({minValue:this._compressor.ratio.minValue,maxValue:this._compressor.ratio.maxValue,context:this.context,convert:!1,param:this._compressor.ratio,units:"positive",value:l.ratio}),j(this,["knee","release","attack","ratio","threshold"])}static getDefaults(){return Object.assign(p.getDefaults(),{attack:.003,knee:30,ratio:12,release:.25,threshold:-24})}get reduction(){return this._compressor.reduction}dispose(){return super.dispose(),this._compressor.disconnect(),this.attack.dispose(),this.release.dispose(),this.threshold.dispose(),this.ratio.dispose(),this.knee.dispose(),this}}const d=[{noteAllocation:"C4",fileLocation:V,sampleTitle:"Sunshine"},{noteAllocation:"D4",fileLocation:_,sampleTitle:"Guitar"},{noteAllocation:"E4",fileLocation:y,sampleTitle:"Bass"},{noteAllocation:"F4",fileLocation:N,sampleTitle:"Drums"},{noteAllocation:"G4",fileLocation:A,sampleTitle:"Piano"},{noteAllocation:"A5",fileLocation:T,sampleTitle:"Vocals"}],L=()=>{const[h,l]=u.useState(!1),i=u.useRef(null),s=u.useRef(null);u.useEffect(()=>(i.current=new g(Object.fromEntries(d.map(t=>[t.noteAllocation,t.fileLocation])),{onload:()=>{l(!0)}}),s.current=new m({threshold:-20,ratio:4,attack:.1,release:.5}).toDestination(),i.current&&s.current&&i.current.connect(s.current),()=>{i.current&&i.current.dispose(),s.current&&s.current.dispose()}),[]);const x=t=>{h&&i.current&&i.current.triggerAttack(t)},v=t=>{i.current&&i.current.triggerRelease(t)},c=(t,a,r,o)=>{s.current&&(s.current.threshold.value=t,s.current.ratio.value=a,s.current.attack.value=r,s.current.release.value=o)};return e.jsxs("div",{children:[e.jsx("h1",{children:"Compression"}),e.jsx("p",{className:"blurb",children:"This works by clamping down on a sound after it has passed a given level. "}),e.jsxs("div",{className:"audioComponentDisplay",children:[e.jsx("div",{className:"playerButtonBox",children:e.jsx("div",{children:d.map(t=>e.jsxs("div",{className:"playerButtonBox",children:[e.jsx("h2",{className:"sampleTitle",children:t.sampleTitle}),e.jsx("div",{onClick:()=>h&&x(t.noteAllocation),children:e.jsx("img",{src:k,alt:"Play",className:"buttons"})}),e.jsx("div",{onClick:()=>h&&v(t.noteAllocation),children:e.jsx("img",{src:b,alt:"Stop",className:"buttons"})})]},t.noteAllocation))})}),e.jsxs("div",{className:"paramDials",children:[e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["Threshold: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"-80",max:"0",step:"1",defaultValue:"-20",onChange:t=>{var a,r,o;return c(parseFloat(t.target.value),((a=s.current)==null?void 0:a.ratio.value)||4,((r=s.current)==null?void 0:r.attack.value)||.1,((o=s.current)==null?void 0:o.release.value)||.5)}})]}),e.jsx("div",{className:"explainer",children:"This sets how high the level of audio has to be before the compressor kicks in"})]}),e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["Ratio: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"1",max:"20",step:"1",defaultValue:"4",onChange:t=>{var a,r,o;return c(((a=s.current)==null?void 0:a.threshold.value)||-20,parseFloat(t.target.value),((r=s.current)==null?void 0:r.attack.value)||.1,((o=s.current)==null?void 0:o.release.value)||.5)}})]}),e.jsx("div",{className:"explainer",children:"This is the intensity at which the audio over the threshold is compressed by"})]}),e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["Attack: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.1",onChange:t=>{var a,r,o;c(((a=s.current)==null?void 0:a.threshold.value)||-20,((r=s.current)==null?void 0:r.ratio.value)||4,parseFloat(t.target.value),((o=s.current)==null?void 0:o.release.value)||.5)}})]}),e.jsx("div",{className:"explainer",children:"How quickly compressor acts after it hits threshold"})]}),e.jsxs("div",{className:"buttonSection",children:[e.jsxs("label",{children:["Release: ",e.jsx("br",{}),e.jsx("input",{type:"range",min:"0",max:"1",step:"0.01",defaultValue:"0.5",onChange:t=>{var a,r,o;c(((a=s.current)==null?void 0:a.threshold.value)||-20,((r=s.current)==null?void 0:r.ratio.value)||4,((o=s.current)==null?void 0:o.attack.value)||.1,parseFloat(t.target.value))}})]}),e.jsx("div",{className:"explainer",children:"How long the compressor acts after it kicks in"})]})]})]})]})};export{L as default};
